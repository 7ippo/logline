{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///logline.min.js","webpack:///webpack/bootstrap 5aece486b0e27cd3b864","webpack:///./src/logline.js","webpack:///./src/localstorage.js","webpack:///./src/interface.js","webpack:///./src/lib/util.js","webpack:///./src/Websql.js","webpack:///./src/indexeddb.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","_interopRequireDefault","default","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","_localstorage","_localstorage2","_Websql","_Websql2","_indexeddb","_indexeddb2","_util","util","LogcatInterface","namespace","_checkProtocol","_protocol","Logline","value","throwError","tickerFn","readyFn","errorFn","_reportTo","all","logs","log","line","xhr","XMLHttpRequest","logsToSend","upload","onprogress","onload","status","onerror","open","setRequestHeader","pop","push","join","withCredentials","unshift","location","host","send","escape","daysToMaintain","keep","e","clean","protocol","values","PROTOCOL","indexOf","init","reportTo","WEBSQL","LOCALSTORAGE","INDEXEDDB","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_interface","_interface2","localStorageLogger","_LoggerInterface","_ref","_len","arguments","args","Array","_key","getPrototypeOf","apply","concat","level","data","window","localStorage","getItem","JSON","parse","time","Date","now","_namesapce","setItem","stringify","filter","removeItem","Interface","_record","errMessage","Error","WebsqlLogger","triedTimes","_inited","_db","transaction","tx","executeSql","undefined","setTimeout","slice","openDatabase","res","index","rows","item","IndexedDBLogger","db","IDBTransaction","READ_WRITE","event","errorCode","store","objectStore","request","add","timestamp","indexedDB","IDBKeyRange","onsuccess","result","onupgradeneeded","createObjectStore","keyPath","createIndex","unique","_getTransactionStore","READ_ONLY","openCursor","cursor","range","upperBound","primaryKey","clear","close","deleteDatabase","mode"],"mappings":"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","file":"logline.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Logline\"] = factory();\n\telse\n\t\troot[\"Logline\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","/*!\n * logline v1.0.0 (https://github.com/latel/logline#readme)\n * Copyright 2016, latel <latelx64@gmail.com>\n * MIT license\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Logline\"] = factory();\n\telse\n\t\troot[\"Logline\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _localstorage = __webpack_require__(1);\n\t\n\tvar _localstorage2 = _interopRequireDefault(_localstorage);\n\t\n\tvar _Websql = __webpack_require__(4);\n\t\n\tvar _Websql2 = _interopRequireDefault(_Websql);\n\t\n\tvar _indexeddb = __webpack_require__(5);\n\t\n\tvar _indexeddb2 = _interopRequireDefault(_indexeddb);\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar util = _interopRequireWildcard(_util);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar LogcatInterface = function LogcatInterface(namespace) {\n\t    LogcatInterface._checkProtocol();\n\t    return new LogcatInterface._protocol(namespace);\n\t};\n\t\n\tvar Logline = function () {\n\t    function Logline(namespace) {\n\t        _classCallCheck(this, Logline);\n\t\n\t        Logline._checkProtocol();\n\t        return new Logline._protocol(namespace);\n\t    }\n\t\n\t    // 检查协议\n\t\n\t\n\t    _createClass(Logline, null, [{\n\t        key: '_checkProtocol',\n\t        value: function _checkProtocol() {\n\t            if (!Logline._protocol) {\n\t                util.throwError('you must choose a protocol with \"using\" method.');\n\t            }\n\t        }\n\t\n\t        // 发送日志\n\t\n\t    }, {\n\t        key: 'deploy',\n\t        value: function deploy(descriptor, tickerFn, readyFn, errorFn) {\n\t            Logline._checkProtocol();\n\t            if (Logline._reportTo) {\n\t                Logline._protocol.all(function (logs) {\n\t                    var xhr = new XMLHttpRequest(),\n\t                        logsToSend = [],\n\t                        log,\n\t                        key,\n\t                        line;\n\t\n\t                    xhr.upload.onprogress = tickerFn;\n\t                    xhr.onload = function () {\n\t                        if (200 === xhr.status) {\n\t                            'function' === typeof readyFn && readyFn();\n\t                        } else {\n\t                            'function' === typeof errorFn && errorFn();\n\t                        }\n\t                    };\n\t                    xhr.onerror = function () {\n\t                        'function' === typeof errorFn && errorFn();\n\t                    };\n\t                    xhr.open('POST', LogcatInterface._reportTo);\n\t                    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n\t\n\t                    // 处理logs成常见的日志形式来上报(一行一条日志内容)，避免重复键名占用空间\n\t                    while (log = logs.pop()) {\n\t                        line = [];\n\t                        for (key in log) {\n\t                            if (log.hasOwnProperty(key) && log[key]) {\n\t                                line.push(log[key]);\n\t                            }\n\t                        }\n\t                        logsToSend.push(line.join('\\t'));\n\t                    }\n\t\n\t                    xhr.withCredentials = true;\n\t                    logsToSend.unshift(location.host + (descriptor ? ': ' + descriptor : ''));\n\t                    xhr.send('data=' + (escape(logsToSend.join('\\n')) || 'no data'));\n\t                });\n\t            } else {\n\t                util.throwError('report address is not configed.');\n\t            }\n\t        }\n\t\n\t        // 清理日志\n\t\n\t    }, {\n\t        key: 'keep',\n\t        value: function keep(daysToMaintain) {\n\t            try {\n\t                Logline._checkProtocol();\n\t                Logline._protocol.keep(daysToMaintain);\n\t            } catch (e) {\n\t                util.throwError('unable to remove logs earlier than ' + daysToMaintain + 'd.');\n\t            }\n\t            return this;\n\t        }\n\t\n\t        // 清空日志并删除数据库\n\t\n\t    }, {\n\t        key: 'clean',\n\t        value: function clean() {\n\t            try {\n\t                Logline._checkProtocol();\n\t                Logline._protocol.clean();\n\t            } catch (e) {\n\t                util.throwError('unable to clean log database.');\n\t            }\n\t            return this;\n\t        }\n\t\n\t        // 选择一个日志协议\n\t\n\t    }, {\n\t        key: 'using',\n\t        value: function using(protocol) {\n\t            // 协议一旦选定即不允许在运行时更改\n\t            if (Logline._protocol) {\n\t                return this;\n\t            }\n\t\n\t            if (-1 < Object.values(Logline.PROTOCOL).indexOf(protocol)) {\n\t                Logline._protocol = protocol;\n\t                Logline.init();\n\t            } else {\n\t                util.throwError('specialfied protocol is not available.');\n\t            }\n\t\n\t            return this;\n\t        }\n\t\n\t        // 初始化选定的协议\n\t\n\t    }, {\n\t        key: 'init',\n\t        value: function init() {\n\t            Logline._checkProtocol();\n\t            Logline._protocol.init();\n\t\n\t            return this;\n\t        }\n\t\n\t        // 配置日志上报地址\n\t\n\t    }, {\n\t        key: 'reportTo',\n\t        value: function reportTo(_reportTo) {\n\t            Logline._reportTo = _reportTo;\n\t            return this;\n\t        }\n\t    }]);\n\t\n\t    return Logline;\n\t}();\n\t\n\tLogline._protocol = null;\n\tLogline._reportTo = null;\n\t\n\tLogline.PROTOCOL = {\n\t    WEBSQL: _Websql2.default,\n\t    LOCALSTORAGE: _localstorage2.default,\n\t    INDEXEDDB: _indexeddb2.default\n\t};\n\t\n\tmodule.exports = Logline;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _interface = __webpack_require__(2);\n\t\n\tvar _interface2 = _interopRequireDefault(_interface);\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar util = _interopRequireWildcard(_util);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar localStorageLogger = function (_LoggerInterface) {\n\t    _inherits(localStorageLogger, _LoggerInterface);\n\t\n\t    function localStorageLogger() {\n\t        var _ref;\n\t\n\t        _classCallCheck(this, localStorageLogger);\n\t\n\t        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t            args[_key] = arguments[_key];\n\t        }\n\t\n\t        return _possibleConstructorReturn(this, (_ref = localStorageLogger.__proto__ || Object.getPrototypeOf(localStorageLogger)).call.apply(_ref, [this].concat(args)));\n\t    }\n\t\n\t    _createClass(localStorageLogger, [{\n\t        key: '_record',\n\t        value: function _record(level, descriptor, data) {\n\t            var logs = window.localStorage.getItem('logline') ? JSON.parse(window.localStorage.getItem('logline')) : [];\n\t            logs.push({\n\t                time: Date.now(),\n\t                namespace: this._namesapce,\n\t                level: level,\n\t                descriptor: descriptor,\n\t                data: data\n\t            });\n\t            try {\n\t                window.localStorage.setItem('logline', JSON.stringify(logs));\n\t            } catch (e) {\n\t                util.throwError('error inserting record');\n\t            }\n\t        }\n\t    }], [{\n\t        key: 'init',\n\t        value: function init() {\n\t            if (!('localStorage' in window)) {\n\t                util.throwError('your platform does not support localstorage protocol.');\n\t            }\n\t            if (!window.localStorage.getItem('logline')) {\n\t                window.localStorage.setItem('logline', JSON.stringify([]));\n\t            }\n\t        }\n\t    }, {\n\t        key: 'all',\n\t        value: function all(readyFn) {\n\t            readyFn(JSON.parse(window.localStorage.getItem('logline')));\n\t        }\n\t    }, {\n\t        key: 'keep',\n\t        value: function keep(daysToMaintain) {\n\t            var logs = !daysToMaintain ? [] : (window.localStorage.getItem('logline') ? JSON.parse(window.localStorage.getItem('logline')) : []).filter(function (log) {\n\t                return log.time >= Date.now() - (daysToMaintain || 2) * 24 * 3600 * 1000;\n\t            });\n\t            window.localStorage.setItem('logline', JSON.stringify(logs));\n\t        }\n\t    }, {\n\t        key: 'clean',\n\t        value: function clean() {\n\t            window.localStorage.removeItem('logline');\n\t        }\n\t    }]);\n\t\n\t    return localStorageLogger;\n\t}(_interface2.default);\n\t\n\texports.default = localStorageLogger;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar util = _interopRequireWildcard(_util);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Interface = function () {\n\t    function Interface(namespace) {\n\t        _classCallCheck(this, Interface);\n\t\n\t        this._namesapce = namespace;\n\t    }\n\t\n\t    // 添加一条日志记录\n\t\n\t\n\t    _createClass(Interface, [{\n\t        key: '_record',\n\t        value: function _record(level, descriptor, data) {\n\t            util.throwError('method _record is not implemented.');\n\t        }\n\t\n\t        // 添加一条等级为info的日志记录\n\t\n\t    }, {\n\t        key: 'info',\n\t        value: function info() {\n\t            this._record.apply(this, Array.prototype.unshift.call(arguments, 'info') && arguments);\n\t        }\n\t\n\t        // 添加一条等级为warn的日志记录\n\t\n\t    }, {\n\t        key: 'warn',\n\t        value: function warn() {\n\t            this._record.apply(this, Array.prototype.unshift.call(arguments, 'warning') && arguments);\n\t        }\n\t\n\t        // 添加一条等级为error的日志记录\n\t\n\t    }, {\n\t        key: 'error',\n\t        value: function error() {\n\t            this._record.apply(this, Array.prototype.unshift.call(arguments, 'error') && arguments);\n\t        }\n\t\n\t        // 添加一条等级为critical的日志记录\n\t\n\t    }, {\n\t        key: 'critical',\n\t        value: function critical() {\n\t            this._record.apply(this, Array.prototype.unshift.call(arguments, 'critical') && arguments);\n\t        }\n\t    }]);\n\t\n\t    return Interface;\n\t}();\n\t\n\texports.default = Interface;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.throwError = throwError;\n\tfunction throwError(errMessage) {\n\t    throw new Error('Logline: ' + errMessage);\n\t}\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _interface = __webpack_require__(2);\n\t\n\tvar _interface2 = _interopRequireDefault(_interface);\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar util = _interopRequireWildcard(_util);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar WebsqlLogger = function (_LoggerInterface) {\n\t    _inherits(WebsqlLogger, _LoggerInterface);\n\t\n\t    function WebsqlLogger() {\n\t        var _ref;\n\t\n\t        _classCallCheck(this, WebsqlLogger);\n\t\n\t        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t            args[_key] = arguments[_key];\n\t        }\n\t\n\t        return _possibleConstructorReturn(this, (_ref = WebsqlLogger.__proto__ || Object.getPrototypeOf(WebsqlLogger)).call.apply(_ref, [this].concat(args)));\n\t    }\n\t\n\t    _createClass(WebsqlLogger, [{\n\t        key: '_record',\n\t        value: function _record(level, descriptor, data, triedTimes) {\n\t            var self = this,\n\t                args = arguments;\n\t\n\t            if (!triedTimes || triedTimes < 10) {\n\t                if (WebsqlLogger._inited) {\n\t                    try {\n\t                        WebsqlLogger._db.transaction(function (tx) {\n\t                            tx.executeSql('INSERT INTO logs (time, namespace, level, descriptor, data) VALUES(?, ?, ?, ? ,?)', [Date.now(), self._namesapce, level, descriptor, data === undefined || data === '' ? '' : JSON.stringify(data) || ''], function () {/* empty func */}, function (tx, e) {\n\t                                throw e;\n\t                            });\n\t                        });\n\t                    } catch (e) {\n\t                        util.throwError('error inserting record');\n\t                    }\n\t                } else {\n\t                    setTimeout(function () {\n\t                        switch (args.length) {\n\t                            case 2:\n\t                                Array.prototype.push.call(args, '', 1);\n\t                                break;\n\t                            case 3:\n\t                                Array.prototype.push.call(args, 1);\n\t                                break;\n\t                            case 4:\n\t                                Array.prototype.push.call(args = Array.prototype.slice.call(args, 0, 3), triedTimes + 1);\n\t                                break;\n\t                            default:\n\t                                break;\n\t                        }\n\t                        self._record.apply(self, args);\n\t                    });\n\t                }\n\t            }\n\t        }\n\t    }], [{\n\t        key: 'init',\n\t        value: function init() {\n\t            if (!('openDatabase' in window)) {\n\t                util.throwError(new Error('your platform does not support websql protocol.'));\n\t            }\n\t            try {\n\t                WebsqlLogger._db = window.openDatabase('logline', '1.0', 'cats loves logs', 4.85 * 1024 * 1024);\n\t                WebsqlLogger._db.transaction(function (tx) {\n\t                    tx.executeSql('CREATE TABLE IF NOT EXISTS logs (time, namespace, level, descriptor, data)', [], function () {\n\t                        WebsqlLogger._inited = true;\n\t                    }, function () {\n\t                        WebsqlLogger._inited = false;\n\t                    });\n\t                });\n\t            } catch (e) {\n\t                util.throwError('unable to init log database.');\n\t            }\n\t        }\n\t    }, {\n\t        key: 'all',\n\t        value: function all(readyFn) {\n\t            try {\n\t                WebsqlLogger._db.transaction(function (tx) {\n\t                    tx.executeSql('SELECT * FROM logs', [], function (tx, res) {\n\t                        var logs = [],\n\t                            index = res.rows.length;\n\t                        while (--index >= 0) {\n\t                            logs.push(res.rows.item(index));\n\t                        }\n\t                        readyFn(logs);\n\t                    }, function (tx, e) {\n\t                        throw e;\n\t                    });\n\t                });\n\t            } catch (e) {\n\t                util.throwError('unable to collect logs from database.');\n\t            }\n\t        }\n\t    }, {\n\t        key: 'keep',\n\t        value: function keep(daysToMaintain) {\n\t            try {\n\t                WebsqlLogger._db.transaction(function (tx) {\n\t                    if (daysToMaintain) {\n\t                        tx.executeSql('DELETE FROM logs WHERE time < ?', [Date.now() - (daysToMaintain || 2) * 24 * 3600 * 1000], function () {/* empty func */}, function (tx, e) {\n\t                            throw e;\n\t                        });\n\t                    } else {\n\t                        tx.executeSql('DELETE FROM logs', [], function () {/* empty func */}, function (tx, e) {\n\t                            throw e;\n\t                        });\n\t                    }\n\t                });\n\t            } catch (e) {\n\t                util.throwError('unable to clean logs from database.');\n\t            }\n\t        }\n\t    }, {\n\t        key: 'clean',\n\t        value: function clean() {\n\t            try {\n\t                WebsqlLogger._db.transaction(function (tx) {\n\t                    tx.executeSql('DROP TABLE logs', [], function () {/* empty func */}, function (tx, e) {\n\t                        throw e;\n\t                    });\n\t                });\n\t            } catch (e) {\n\t                util.throwError('unable to clean log database.');\n\t            }\n\t        }\n\t    }]);\n\t\n\t    return WebsqlLogger;\n\t}(_interface2.default);\n\t\n\texports.default = WebsqlLogger;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _interface = __webpack_require__(2);\n\t\n\tvar _interface2 = _interopRequireDefault(_interface);\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar util = _interopRequireWildcard(_util);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar IndexedDBLogger = function (_LoggerInterface) {\n\t    _inherits(IndexedDBLogger, _LoggerInterface);\n\t\n\t    function IndexedDBLogger() {\n\t        var _ref;\n\t\n\t        _classCallCheck(this, IndexedDBLogger);\n\t\n\t        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t            args[_key] = arguments[_key];\n\t        }\n\t\n\t        return _possibleConstructorReturn(this, (_ref = IndexedDBLogger.__proto__ || Object.getPrototypeOf(IndexedDBLogger)).call.apply(_ref, [this].concat(args)));\n\t    }\n\t\n\t    _createClass(IndexedDBLogger, [{\n\t        key: '_record',\n\t        value: function _record(level, descriptor, data) {\n\t            var transaction = IndexedDBLogger.db.transaction(['logs'], IDBTransaction.READ_WRITE || 'readwrite');\n\t            transaction.onerror = function (event) {\n\t                return util.throwError(event.target.errorCode);\n\t            };\n\t\n\t            var store = transaction.objectStore('logs');\n\t            var request = store.add({\n\t                timestamp: Date.now(),\n\t                namespace: this._namesapce,\n\t                descriptor: descriptor,\n\t                data: data\n\t            });\n\t\n\t            request.onerror = function (event) {\n\t                return util.throwError(event.target.errorCode);\n\t            };\n\t        }\n\t    }], [{\n\t        key: 'init',\n\t        value: function init() {\n\t            if (!window.indexedDB || !window.IDBTransaction || !window.IDBKeyRange) {\n\t                util.throwError('your platform does not support indexeddb protocol.');\n\t            }\n\t\n\t            IndexedDBLogger.request = window.indexedDB.open('logline');\n\t            IndexedDBLogger.request.onerror = function (event) {\n\t                return util.throwError('protocol indexeddb is prevented.');\n\t            };\n\t            IndexedDBLogger.request.onsuccess = function (event) {\n\t                IndexedDBLogger.db = event.target.result;\n\t                // globally handle db request errors\n\t                IndexedDBLogger.db.onerror = function (event) {\n\t                    return util.throwError(event.target.errorCode);\n\t                };\n\t            };\n\t            IndexedDBLogger.request.onupgradeneeded = function (event) {\n\t                // init dabasebase\n\t                var db = event.target.result,\n\t                    store = db.createObjectStore('logs', { keyPath: 'timestamp' });\n\t                store.createIndex('namespace', 'namespace', { unique: false });\n\t                store.createIndex('level', 'level', { unique: false });\n\t                store.createIndex('descriptor', 'descriptor', { unique: false });\n\t                store.createIndex('data', 'data', { unique: false });\n\t            };\n\t        }\n\t    }, {\n\t        key: 'all',\n\t        value: function all(readyFn) {\n\t            var store = IndexedDBLogger._getTransactionStore(IDBTransaction.READ_ONLY || 'readonly'),\n\t                request = store.openCursor(),\n\t                logs = [];\n\t\n\t            request.onsuccess = function (event) {\n\t                var cursor = event.target.result;\n\t                if (cursor) {\n\t                    logs.push({\n\t                        timestamp: cursor.value.timestamp,\n\t                        namespace: cursor.value.namespace,\n\t                        descriptor: cursor.value.descriptor,\n\t                        data: cursor.value.data\n\t                    });\n\t                    cursor.continue();\n\t                } else {\n\t                    readyFn(logs);\n\t                }\n\t            };\n\t\n\t            request.onerror = function (event) {\n\t                return util.throwError('failed to literat on logs from database.');\n\t            };\n\t        }\n\t    }, {\n\t        key: 'keep',\n\t        value: function keep(daysToMaintain) {\n\t            var store = IndexedDBLogger._getTransactionStore(IDBTransaction.READ_WRITE);\n\t            if (!daysToMaintain) {\n\t                var request = store.clear().onerror = function (event) {\n\t                    return util.throwError(event.target.errorCode);\n\t                };\n\t            } else {\n\t                var range = IDBKeyRange.upperBound(Date.now() - (daysToMaintain || 2) * 24 * 3600 * 1000, true);\n\t                var _request = store.openCursor(range);\n\t                _request.onsuccess = function (event) {\n\t                    var cursor = event.target.result;\n\t                    if (cursor) {\n\t                        store.delete(cursor.primaryKey);\n\t                        cursor.continue();\n\t                    }\n\t                };\n\t                _request.onerror = function (event) {\n\t                    return util.throwError('unable to locate logs earlier than ' + daysToMaintain + 'd.');\n\t                };\n\t            }\n\t        }\n\t    }, {\n\t        key: 'clean',\n\t        value: function clean() {\n\t            // database can be removed only after all connections are closed\n\t            IndexedDBLogger.db.close();\n\t            var request = window.indexedDB.deleteDatabase('logline');\n\t            request.onerror = function (event) {\n\t                return util.throwError(event.target.errorCode);\n\t            };\n\t            /* eslint no-unused-vars: \"off\" */\n\t            request.onsuccess = function (event) {\n\t                return delete IndexedDBLogger.db;\n\t            };\n\t        }\n\t    }, {\n\t        key: '_getTransactionStore',\n\t        value: function _getTransactionStore(mode) {\n\t            if (IndexedDBLogger.db) {\n\t                var transaction = IndexedDBLogger.db.transaction(['logs'], mode || IDBTransaction.READ_WRITE || 'readwrite');\n\t                transaction.onerror = function (event) {\n\t                    return util.throwError(event.target.errorCode);\n\t                };\n\t                return transaction.objectStore('logs');\n\t            } else {\n\t                util.throwError('log database is not created or connections is closed, cosidering init it.');\n\t            }\n\t        }\n\t    }]);\n\t\n\t    return IndexedDBLogger;\n\t}(_interface2.default);\n\t\n\texports.default = IndexedDBLogger;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** logline.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 5aece486b0e27cd3b864\n **/","import LocalStorageLogger from './localstorage';\nimport WebsqlLogger from './Websql';\nimport IndexedDBLogger from './indexeddb';\nimport * as util from './lib/util';\n\nlet LogcatInterface = function(namespace) {\n    LogcatInterface._checkProtocol();\n    return new LogcatInterface._protocol(namespace);\n};\n\nclass Logline {\n    constructor(namespace) {\n        Logline._checkProtocol();\n        return new Logline._protocol(namespace);\n    }\n\n    // 检查协议\n    static _checkProtocol() {\n        if (!Logline._protocol) {\n            util.throwError('you must choose a protocol with \"using\" method.');\n        }\n    }\n\n    // 发送日志\n    static deploy(descriptor, tickerFn, readyFn, errorFn) {\n        Logline._checkProtocol();\n        if (Logline._reportTo) {\n            Logline._protocol.all(function(logs) {\n                var xhr = new XMLHttpRequest(),\n                    logsToSend = [],\n                    log, key, line;\n\n                xhr.upload.onprogress = tickerFn;\n                xhr.onload = function() {\n                    if (200 === xhr.status) {\n                        'function' === typeof readyFn && readyFn();\n                    }\n                    else {\n                        'function' === typeof errorFn && errorFn();\n                    }\n                };\n                xhr.onerror = function() {\n                    'function' === typeof errorFn && errorFn();\n                };\n                xhr.open('POST', LogcatInterface._reportTo);\n                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n\n                // 处理logs成常见的日志形式来上报(一行一条日志内容)，避免重复键名占用空间\n                while ((log = logs.pop())) {\n                    line = [];\n                    for (key in log) {\n                        if (log.hasOwnProperty(key) && log[key]) {\n                            line.push(log[key]);\n                        }\n                    }\n                    logsToSend.push(line.join('\\t'));\n                }\n\n                xhr.withCredentials = true;\n                logsToSend.unshift(location.host + (descriptor ? (': ' + descriptor) : ''));\n                xhr.send('data=' + (escape(logsToSend.join('\\n')) || 'no data'));\n            });\n        }\n        else {\n            util.throwError('report address is not configed.');\n        }\n    }\n\n    // 清理日志\n    static keep(daysToMaintain) {\n        try {\n            Logline._checkProtocol();\n            Logline._protocol.keep(daysToMaintain);\n        } catch (e) {\n            util.throwError('unable to remove logs earlier than ' + daysToMaintain + 'd.');\n        }\n        return this;\n    }\n\n    // 清空日志并删除数据库\n    static clean() {\n        try {\n            Logline._checkProtocol();\n            Logline._protocol.clean();\n        } catch (e) { util.throwError('unable to clean log database.'); }\n        return this;\n    }\n\n    // 选择一个日志协议\n    static using(protocol) {\n        // 协议一旦选定即不允许在运行时更改\n        if (Logline._protocol) {\n            return this;\n        }\n\n        if (-1 < Object.values(Logline.PROTOCOL).indexOf(protocol)) {\n            Logline._protocol = protocol;\n            Logline.init();\n        }\n        else {\n            util.throwError('specialfied protocol is not available.');\n        }\n\n        return this;\n    }\n\n    // 初始化选定的协议\n    static init() {\n        Logline._checkProtocol();\n        Logline._protocol.init();\n\n        return this;\n    }\n\n    // 配置日志上报地址\n    static reportTo(reportTo) {\n        Logline._reportTo = reportTo;\n        return this;\n    }\n}\n\nLogline._protocol = null;\nLogline._reportTo = null;\n\nLogline.PROTOCOL = {\n    WEBSQL: WebsqlLogger,\n    LOCALSTORAGE: LocalStorageLogger,\n    INDEXEDDB: IndexedDBLogger\n};\n\nmodule.exports = Logline;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/logline.js\n **/","import LoggerInterface from './interface';\nimport * as util from './lib/util';\n\nexport default class localStorageLogger extends LoggerInterface {\n    constructor(...args) {\n        super(...args);\n    }\n\n    _record(level, descriptor, data) {\n        var logs = window.localStorage.getItem('logline') ? JSON.parse(window.localStorage.getItem('logline')) : [];\n        logs.push({\n            time: Date.now(),\n            namespace: this._namesapce,\n            level: level,\n            descriptor: descriptor,\n            data: data\n        });\n        try {\n            window.localStorage.setItem('logline', JSON.stringify(logs));\n        } catch (e) { util.throwError('error inserting record'); }\n    }\n\n    static init() {\n        if (!('localStorage' in window)) {\n            util.throwError('your platform does not support localstorage protocol.');\n        }\n        if (!window.localStorage.getItem('logline')) {\n            window.localStorage.setItem('logline', JSON.stringify([]));\n        }\n    }\n\n    static all(readyFn) {\n        readyFn(JSON.parse(window.localStorage.getItem('logline')));\n    }\n\n    static keep(daysToMaintain) {\n        var logs = !daysToMaintain ? [] : (window.localStorage.getItem('logline') ? JSON.parse(window.localStorage.getItem('logline')) : []).filter(function(log) {\n            return log.time >= (Date.now() - (daysToMaintain || 2) * 24 * 3600 * 1000);\n        });\n        window.localStorage.setItem('logline', JSON.stringify(logs));\n    }\n\n    static clean() {\n        window.localStorage.removeItem('logline');\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/localstorage.js\n **/","import * as util from './lib/util';\n\nexport default class Interface {\n    constructor(namespace) {\n        this._namesapce = namespace;\n    }\n\n    // 添加一条日志记录\n    _record(level, descriptor, data) {\n        util.throwError('method _record is not implemented.');\n    }\n\n    // 添加一条等级为info的日志记录\n    info() {\n        this._record.apply(this, Array.prototype.unshift.call(arguments, 'info') && arguments);\n    }\n\n    // 添加一条等级为warn的日志记录\n    warn() {\n        this._record.apply(this, Array.prototype.unshift.call(arguments, 'warning') && arguments);\n    }\n\n    // 添加一条等级为error的日志记录\n    error() {\n        this._record.apply(this, Array.prototype.unshift.call(arguments, 'error') && arguments);\n    }\n\n    // 添加一条等级为critical的日志记录\n    critical() {\n        this._record.apply(this, Array.prototype.unshift.call(arguments, 'critical') && arguments);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/interface.js\n **/","export function throwError(errMessage) {\n    throw new Error('Logline: ' + errMessage);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/util.js\n **/","import LoggerInterface from './interface';\nimport * as util from './lib/util';\n\nexport default class WebsqlLogger extends LoggerInterface {\n    constructor(...args) {\n        super(...args);\n    }\n\n    _record(level, descriptor, data, triedTimes) {\n        var self = this, args = arguments;\n\n        if (!triedTimes || triedTimes < 10) {\n            if (WebsqlLogger._inited) {\n                try {\n                    WebsqlLogger._db.transaction(function(tx) {\n                        tx.executeSql(\n                            'INSERT INTO logs (time, namespace, level, descriptor, data) VALUES(?, ?, ?, ? ,?)',\n                            [Date.now(), self._namesapce, level, descriptor, (data === undefined || data === '') ? '' : (JSON.stringify(data) || '')],\n                            function() {/* empty func */},\n                            function(tx, e) {throw e;}\n                        );\n                    });\n                } catch (e) { util.throwError('error inserting record'); }\n            }\n            else {\n                setTimeout(function() {\n                    switch (args.length) {\n                    case 2:\n                        Array.prototype.push.call(args, '', 1);\n                        break;\n                    case 3:\n                        Array.prototype.push.call(args, 1);\n                        break;\n                    case 4:\n                        Array.prototype.push.call(args = Array.prototype.slice.call(args, 0, 3), triedTimes + 1);\n                        break;\n                    default:\n                        break;\n                    }\n                    self._record.apply(self, args);\n                });\n            }\n        }\n    }\n\n    static init() {\n        if (!('openDatabase' in window)) {\n            util.throwError(new Error('your platform does not support websql protocol.'));\n        }\n        try {\n            WebsqlLogger._db = window.openDatabase('logline', '1.0', 'cats loves logs', 4.85 * 1024 * 1024);\n            WebsqlLogger._db.transaction(function(tx) {\n                tx.executeSql(\n                    'CREATE TABLE IF NOT EXISTS logs (time, namespace, level, descriptor, data)',\n                    [],\n                    function() {\n                        WebsqlLogger._inited = true;\n                    },\n                    function() {\n                        WebsqlLogger._inited = false;\n                    }\n                );\n            });\n        } catch (e) { util.throwError('unable to init log database.'); }\n    }\n\n    static all(readyFn) {\n        try {\n            WebsqlLogger._db.transaction(function(tx) {\n                tx.executeSql(\n                    'SELECT * FROM logs',\n                    [],\n                    function(tx, res) {\n                        var logs = [], index = res.rows.length;\n                        while (--index >= 0) {\n                            logs.push(res.rows.item(index));\n                        }\n                        readyFn(logs);\n                    },\n                    function(tx, e) {throw e;}\n                );\n            });\n        } catch (e) { util.throwError('unable to collect logs from database.'); }\n    }\n\n    static keep(daysToMaintain) {\n        try {\n            WebsqlLogger._db.transaction(function(tx) {\n                if (daysToMaintain) {\n                    tx.executeSql(\n                        'DELETE FROM logs WHERE time < ?',\n                        [Date.now() - (daysToMaintain || 2) * 24 * 3600 * 1000],\n                        function() {/* empty func */},\n                        function(tx, e) {throw e;}\n                    );\n                }\n                else {\n                    tx.executeSql(\n                        'DELETE FROM logs',\n                        [],\n                        function() {/* empty func */},\n                        function(tx, e) {throw e;}\n                    );\n                }\n            });\n        } catch (e) { util.throwError('unable to clean logs from database.'); }\n    }\n\n    static clean() {\n        try {\n            WebsqlLogger._db.transaction(function(tx) {\n                tx.executeSql(\n                    'DROP TABLE logs',\n                    [],\n                    function() {/* empty func */},\n                    function(tx, e) {throw e;}\n                );\n            });\n        } catch (e) { util.throwError('unable to clean log database.'); }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Websql.js\n **/","import LoggerInterface from './interface';\nimport * as util from './lib/util';\n\nexport default class IndexedDBLogger extends LoggerInterface {\n    constructor(...args) {\n        super(...args);\n    }\n\n    _record(level, descriptor, data) {\n        let transaction = IndexedDBLogger.db.transaction(['logs'], IDBTransaction.READ_WRITE || 'readwrite');\n        transaction.onerror = event => util.throwError(event.target.errorCode);\n\n        let store = transaction.objectStore('logs');\n        let request = store.add({\n            timestamp: Date.now(),\n            namespace: this._namesapce,\n            descriptor: descriptor,\n            data: data\n        });\n\n        request.onerror = event => util.throwError(event.target.errorCode);\n    }\n\n    static init() {\n        if (!window.indexedDB || !window.IDBTransaction || !window.IDBKeyRange) {\n            util.throwError('your platform does not support indexeddb protocol.');\n        }\n\n        IndexedDBLogger.request = window.indexedDB.open('logline');\n        IndexedDBLogger.request.onerror = event => util.throwError('protocol indexeddb is prevented.');\n        IndexedDBLogger.request.onsuccess = event => {\n            IndexedDBLogger.db = event.target.result;\n            // globally handle db request errors\n            IndexedDBLogger.db.onerror = event => util.throwError(event.target.errorCode);\n        };\n        IndexedDBLogger.request.onupgradeneeded = event => {\n            // init dabasebase\n            let db = event.target.result, store = db.createObjectStore('logs', { keyPath: 'timestamp' });\n            store.createIndex('namespace', 'namespace', { unique: false });\n            store.createIndex('level', 'level', { unique: false });\n            store.createIndex('descriptor', 'descriptor', { unique: false });\n            store.createIndex('data', 'data', { unique: false });\n        };\n    }\n\n    static all(readyFn) {\n        let store = IndexedDBLogger._getTransactionStore(IDBTransaction.READ_ONLY || 'readonly'),\n            request = store.openCursor(),\n            logs = [];\n\n        request.onsuccess = event => {\n            var cursor = event.target.result;\n            if (cursor) {\n                logs.push({\n                    timestamp: cursor.value.timestamp,\n                    namespace: cursor.value.namespace,\n                    descriptor: cursor.value.descriptor,\n                    data: cursor.value.data\n                });\n                cursor.continue();\n            }\n            else {\n                readyFn(logs);\n            }\n        };\n\n        request.onerror = event => util.throwError('failed to literat on logs from database.');\n    }\n\n    static keep(daysToMaintain) {\n        let store = IndexedDBLogger._getTransactionStore(IDBTransaction.READ_WRITE);\n        if (!daysToMaintain) {\n            let request = store.clear().onerror = event => util.throwError(event.target.errorCode);\n        }\n        else {\n            let range = IDBKeyRange.upperBound((Date.now() - (daysToMaintain || 2) * 24 * 3600 * 1000), true);\n            let request = store.openCursor(range);\n            request.onsuccess = event => {\n                let cursor = event.target.result;\n                if (cursor) {\n                    store.delete(cursor.primaryKey);\n                    cursor.continue();\n                }\n            };\n            request.onerror = event => util.throwError('unable to locate logs earlier than ' + daysToMaintain + 'd.');\n        }\n    }\n\n    static clean() {\n        // database can be removed only after all connections are closed\n        IndexedDBLogger.db.close();\n        let request = window.indexedDB.deleteDatabase('logline');\n        request.onerror = event => util.throwError(event.target.errorCode);\n        /* eslint no-unused-vars: \"off\" */\n        request.onsuccess = event => delete IndexedDBLogger.db;\n    }\n\n    static _getTransactionStore(mode) {\n        if (IndexedDBLogger.db) {\n            let transaction = IndexedDBLogger.db.transaction(['logs'], mode || IDBTransaction.READ_WRITE || 'readwrite');\n            transaction.onerror = event => util.throwError(event.target.errorCode);\n            return transaction.objectStore('logs');\n        }\n        else {\n            util.throwError('log database is not created or connections is closed, cosidering init it.');\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/indexeddb.js\n **/"],"sourceRoot":""}